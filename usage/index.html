<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>R-ABE Keyserver - R-ABE Keyserver API</title>
    <meta name="generator" content="Hugo 0.32.4" />

    
    <meta name="description" content="R-ABE Keyserver">
    
    <link rel="canonical" href="https://fraunhofer-aisec.github.io/rabe-keyserver/usage/">
    
    <meta name="author" content="Fraunhofer AISEC">
    

    <meta property="og:url" content="https://fraunhofer-aisec.github.io/rabe-keyserver/usage/">
    <meta property="og:title" content="R-ABE Keyserver API">
    <meta property="og:image" content="https://fraunhofer-aisec.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="R-ABE Keyserver API">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://fraunhofer-aisec.github.io/rabe-keyserver/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://fraunhofer-aisec.github.io/rabe-keyserver/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://fraunhofer-aisec.github.io/rabe-keyserver/fonts/icon.eot');
        src: url('https://fraunhofer-aisec.github.io/rabe-keyserver/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://fraunhofer-aisec.github.io/rabe-keyserver/fonts/icon.woff')
               format('woff'),
             url('https://fraunhofer-aisec.github.io/rabe-keyserver/fonts/icon.ttf')
               format('truetype'),
             url('https://fraunhofer-aisec.github.io/rabe-keyserver/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://fraunhofer-aisec.github.io/rabe-keyserver/stylesheets/application.css">
    <link rel="stylesheet" href="https://fraunhofer-aisec.github.io/rabe-keyserver/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://fraunhofer-aisec.github.io/rabe-keyserver/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://fraunhofer-aisec.github.io/rabe-keyserver/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://fraunhofer-aisec.github.io/rabe-keyserver/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue-grey palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        R-ABE Keyserver
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/@FraunhoferAISEC" title="@@FraunhoferAISEC on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/Fraunhofer-AISEC" title="@Fraunhofer-AISEC on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://www.aisec.fraunhofer.de" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://fraunhofer-aisec.github.io/rabe-keyserver/images/logo.png">
        </div>
      
      <div class="name">
        <strong>R-ABE Keyserver API <span class="version">0.1.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a class="current" title="Usage" href="https://fraunhofer-aisec.github.io/rabe-keyserver/usage/">
	
	Usage
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="License" href="https://fraunhofer-aisec.github.io/rabe-keyserver/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/@FraunhoferAISEC" target="_blank" title="@@FraunhoferAISEC on Twitter">
              @@FraunhoferAISEC on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/Fraunhofer-AISEC" target="_blank" title="@Fraunhofer-AISEC on GitHub">
              @Fraunhofer-AISEC on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:info@aisec.fraunhofer.de" title="Email of info@aisec.fraunhofer.de">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>R-ABE Keyserver </h1>

			

<p>Welcome to the R-ABE Keyserver API! This REST API wraps the attribute based encryption (ABE) schemes of the R-ABE library and can be used to set up an ABE key server.
Currently, the keyserver API supports only the &ldquo;BSW&rdquo; scheme, as described in [1], but we plan to add support for all six schemes implemented by R-ABE.</p>

<p><em>Note that the API is still under development and must not be used in production. We rather provide it as an easy way to get started with R-ABE, without writing your own standalone program in Rust or C.</em></p>

<p>To get started with the R-ABE keyserver, refer to the <a href="https://github.com/Fraunhofer-AISEC/rabe-keyserver/blob/master/example_client/rabe-client.py">example python client</a>.</p>

<p>[1] <em>John Bethencourt, Amit Sahai, and Brent Waters. Ciphertext-policy attribute-based encryption. in IEEE Symposium on Security and Privacy, pages 321â€“334, 2007.</em></p>

<h1 id="scheme-setup">Scheme Setup</h1>

<p>An ABE scheme must be initialized before it can be used. During initialization, the key material for the keyserver is created and a session ID is issued that is required in further requests within this scheme.</p>

<p>Call the <code>setup</code> endpoint to create a new instance of a scheme and define the attribute universe. Some schemes do not require an upfront definition of the attribute universe. In this case, the <code>attributes</code> field must be given nevertheless, but its value will have no effect.</p>

<ul>
<li><strong>Endpoint</strong>: <code>/setup</code></li>
<li><strong>Type</strong>: POST</li>
<li><strong>Data</strong>
<code>
{
&quot;scheme&quot;: SCHEME,
&quot;attributes&quot;:  [
					&quot;attribute_1&quot;,
					&quot;...&quot;,
					&quot;attribute_n&quot;,
				],
}
</code></li>
<li><strong>Result</strong>: <code>session_id</code>: a session ID that refers to the newly set up scheme</li>
</ul>

<h1 id="user-key-attribute-generation">User Key/Attribute Generation</h1>

<p>After setting up the scheme, the keyserver is in possession of master keys for the scheme, but there are no user keys yet. To create a user key, the <code>add_user</code> endpoint is used. Keys are typically only assigned to <em>attributes</em>, i.e. you will not create the keys for a user but for a set of attributes.</p>

<ul>
<li><strong>Endpoint</strong>: <code>/add_user</code></li>
<li><strong>Type</strong>: POST</li>
<li><strong>Data</strong></li>
</ul>

<pre><code class="language-json">{
 &quot;username&quot;: &lt;username&gt;,
 &quot;password&quot;: &lt;password&gt;,
 &quot;random_session_id&quot;: &lt;session_id&gt;,
 &quot;attributes&quot;:  [
 					&quot;attribute_1&quot;,
 					&quot;...&quot;,
 					&quot;attribute_n&quot;,
 				],
}
</code></pre>

<ul>
<li><strong>Result</strong>: HTTP <code>200</code> in case of success, HTTP <code>500</code> <em>BadRequest</em> otherwise.</li>
</ul>

<h1 id="encryption">Encryption</h1>

<p>In ciphertext-policy schemes (CP-ABE), data is encrypted for a <em>policy</em> over attributes. How a policy looks like depends on the scheme, but in most cases it will be a boolean expression of attributes for which keys have been created in the previous phase.</p>

<p>To encrypt, you will need to provide the session ID, the plaintext data, and the desired policy.</p>

<ul>
<li><strong>Endpoint</strong>: <code>/encrypt</code></li>
<li><strong>Type</strong>: POST</li>
<li><strong>Data</strong></li>
</ul>

<pre><code class="language-json">{
 &quot;plaintext&quot;: &lt;plaintext to encrypt&gt;,
 &quot;policy&quot;: &lt;scheme-specific policy&gt;,
 &quot;session_id&quot;: &lt;session_id&gt;,
}
</code></pre>

<p>For ciphertext-policy schemes, the is a JSON structure determining the attribute access rights. For the <em>BSW</em>, for instance, a valid policy looks as follows:</p>

<pre><code class="language-json">  { &quot;OR&quot;: [
  	{ &quot;ATT&quot;: &quot;attribute_1&quot;}, 
  	{&quot;ATT&quot;: &quot;attribute_2&quot;}
  	]
  }
</code></pre>

<ul>
<li><strong>Result</strong>: A not further specified JSON structure that can be treated as an opaque Blob by the client. This structure contains the encrypted ciphertext and some scheme-specific parameters. The Blob will be used for decryption. It shall not be modified, but it can be freely moved around in the public.</li>
</ul>

<h1 id="decryption">Decryption</h1>

<p>In contrast to classical public key cryptography, decryption is not restricted to the owner of a single private key, but rather any private key for attributes matching the encryption policy will be able to decrypt data.</p>

<p>To use the <code>decrypt</code> endpoint, you will need to provide the session ID, the username, and the ciphertext structure. The keyserver will automatically use the attributes assigned to the user in the session and attempt to decrypt the ciphertext.</p>

<ul>
<li><strong>Endpoint</strong>:    <code>/decrypt</code></li>
<li><strong>Type</strong>: POST</li>
<li><strong>Data</strong></li>
</ul>

<pre><code class="language-json">{
 &quot;ct&quot;: &lt;Ciphertext blob, received from /encrypt endpoint&gt;,
 &quot;session_id&quot;:  &lt;session_id&gt;
}
</code></pre>

<ul>
<li><strong>Result</strong>: The plaintext as a string</li>
</ul>


			<aside class="copyright" role="note">
				
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
  </div>

  <div class="next">
  
      <a href="https://fraunhofer-aisec.github.io/rabe-keyserver/license/" title="License">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              License
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://fraunhofer-aisec.github.io/rabe-keyserver/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

